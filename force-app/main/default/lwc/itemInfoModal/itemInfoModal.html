<template>
  <header class="slds-modal__header">
    <h2 class="slds-text-heading_medium">{modalTitle}</h2>
  </header>
  <div class="slds-modal__content slds-p-around_medium body-scroll">
    <!-- Left column: Product Data -->
    <div class="product-data" data-id="product-data">
      <template if:true={isLoading}>
        <p>Haetaan tuotteen tietoja...</p>
      </template>
      <template if:true={hasError}>
        <p>Virhe ladattaessa tuotetta:</p>
        <p>{errorMessage}</p>
      </template>

      <!-- Product Data -->
      <template if:true={productData}>
        <template for:each={productData} for:item="pData">
          <div key={pData.title} class="product-data__row">
            <p class="slds-text-title">{pData.title}:</p>
            <p>
              <lightning-formatted-rich-text value={pData.value}></lightning-formatted-rich-text>
            </p>
            <br>
          </div>
        </template>
      </template>
    </div>
    <!-- Right column: Image + Nutrients -->
    <div class="product-image" data-id="product-right-rail">
      <!-- Product Image -->
      <template lwc:if={productImageUrl}>
        <img class="product-image__img" width="360" height="360" decoding="async" loading="eager" style="color:transparent" src={productImageUrl}>
      </template>

      <!-- Product Nutrients -->
      <template if:true={productNutrients}>
        <p class="slds-text-title">Ravintosisältö:</p>
        <template for:each={productNutrients} for:item="pNutrient">
          <div key={pNutrient.title} class="product-data__row">
            <p class="slds-text-title">{pNutrient.title}:</p>
            <p>
              <lightning-formatted-rich-text value={pNutrient.value}></lightning-formatted-rich-text>
            </p>
          </div>
        </template>
      </template>
    </div>
  </div>
  <footer class="slds-modal__footer">
    <lightning-button variant="neutral" label="Sulje" onclick={handleClose}></lightning-button>
  </footer>
</template>
